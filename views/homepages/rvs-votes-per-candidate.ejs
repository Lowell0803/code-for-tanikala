<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TANIKALA Voting System</title>

    <!-- Admin CSS from ejs1 -->
    <link rel="stylesheet" type="text/css" href="admin/css/index-admin.css" />
    <!-- <link rel="stylesheet" type="text/css" href="admin/css/sidebar.css" /> -->
    <link rel="stylesheet" type="text/css" href="admin/css/candidates.css" />
    <link rel="stylesheet" type="text/css" href="admin/css/vote-tally.css" />
    <link rel="stylesheet" type="text/css" href="admin/css/index-election.css" />
    <link rel="stylesheet" type="text/css" href="admin/css/voter-id-form.css" />

    <!-- ejs2 own CSS -->
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/home.css" />
    <link rel="stylesheet" type="text/css" href="css/rvs.css" />

    <!-- Admin dependency CSS -->

    <link rel="stylesheet" type="text/css" href="admin/dependencies/progress-bar.css" />

    <!-- External fonts and icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=upins:wght@400;700&display=swap" rel="stylesheet" />

    <style>
      .progress-bar {
        background-color: #e0e0e0;
        border-radius: 10px;
        width: 100%;
        height: 20px;
        overflow: hidden;
        margin: 5px 0;
      }

      .progress {
        background-color: #4caf50;
        height: 100%;
        width: 0; /* this value is set inline from the EJS variable */
        transition: width 0.5s ease-in-out;
      }

      .main h3 {
        color: black;
      }

      .modal {
        color: black;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal h3 {
        color: black;
      }

      .modal-content {
        background-color: #fff;
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 90%;
        height: 70%;
        /* max-width: 700px; */
        border-radius: 5px;
      }

      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }

      .voteHashList {
        font-size: 8 px;
        width: 100%;
        height: 100%;
      }
    </style>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <header class="header">
      <div class="header-logo">
        <img src="img/logo_tanikala.png" alt="Tanikala Voting System" />
      </div>
      <nav class="header-nav">
        <h2 id="active-link">Results Verification Portal</h2>
      </nav>
      <div class="header-bottom-line"></div>
    </header>

    <div class="content">
      <div class="content-title">
        <h3 class="h3" style="text-transform: uppercase">Welcome to the Bulacan State University Student Government Elections - Results Verification Portal!</h3>
      </div>

      <div class="content-main">
        <div class="main-first">
          <ul class="header-nav-content">
            <li><a href="/rvs-about">About</a></li>
            <li><a href="/rvs-voter-turnout">Voter Turnout</a></li>
            <li><a href="/rvs-votes-per-candidate" id="active-link2">Votes per Candidate</a></li>
            <li><a href="/rvs-election-results">Election Results</a></li>
          </ul>
          <div class="election-title">
            <p class="title">
              <span>BulSU Student Government Elections S.Y. 2025 - 2026</span>
            </p>
          </div>
        </div>

        <div class="beside">
          <i class="fa-solid fa-house"></i>
          <a href="/index-results-are-out-period">Go Back to Homepage.</a>
        </div>

        <div class="main-container">
          <p>
            This page allows you to view detailed vote counts for each candidate in your selected election. Click "View List of Voter IDs" to see the voter IDs associated with the votes recorded for each candidate. To verify that your vote has been added to a specific candidate, search for your voter ID (which can be found on your voting receipt) in the list. If your voter ID appears, it confirms that your vote has been successfully recorded for that candidate. <br />
            <br />
            To ensure that your vote has not been recorded for a candidate you did not vote for, simply search againâ€”your voter ID should not appear under that candidate.
          </p>
          <br />
          <br />
          <h2 class="rvs-title">Votes per Candidate</h2>
          <br />
          <br />
          <div class="rvs-container"><%- include('../admin/shared-vote-tally') %></div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-left">
        <img src="img/calendar.png" class="footer-img" />
        <p id="datetime" data-date="<%= electionConfig.fakeCurrentDate %>"></p>
      </div>

      <div class="footer-center">
        <img src="img/copyright.png" class="footer-img" id="copyright-img" />
        <p>2025 - Fourmula 1</p>
      </div>

      <!-- <div class="footer-right">
        <img src="img/info.png" class="footer-img" id="info-img" />
        <p>Need help? Click&nbsp;</p>
        <a href="help_page">here.</a>
      </div> -->
    </footer>

    <script>
      function formatDate(isoString) {
        const date = new Date(isoString);
        const options = {
          month: "long",
          day: "2-digit",
          year: "numeric",
          hour: "2-digit",
          minute: "2-digit",
          hour12: true,
        };
        return date.toLocaleString("en-US", options).toUpperCase();
      }

      function updateDateTime() {
        const datetimeElement = document.getElementById("datetime");
        if (!datetimeElement) return;

        // Get the initial time from the data attribute
        let currentTime = new Date(datetimeElement.getAttribute("data-date"));

        function update() {
          datetimeElement.textContent = formatDate(currentTime);
          currentTime.setMinutes(currentTime.getMinutes() + 1); // Increment by 1 minute
        }

        update(); // Set initial formatted date
        setInterval(update, 60000); // Update every minute (60000ms)
      }

      document.addEventListener("DOMContentLoaded", updateDateTime);
    </script>
    <script src="js/index.js"></script>
  </body>
</html>
